<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…»è€é™¢ç®¡ç†ç³»ç»Ÿ - æ ¸å¿ƒåœºæ™¯æ¼”ç¤º</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .scenario-card {
            transition: all 0.3s ease;
        }
        .scenario-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .message-bubble {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <!-- åœºæ™¯é€‰æ‹©é¡µé¢ -->
    <div id="scenario-selection" class="min-h-screen flex items-center justify-center p-4">
        <div class="max-w-4xl w-full">
            <div class="text-center mb-12">
                <h1 class="text-4xl font-bold text-white mb-4">ğŸ¥ æ™ºæ…§å…»è€é™¢ç®¡ç†ç³»ç»Ÿ</h1>
                <p class="text-xl text-white/80">AIå¼•å¯¼å¼å¯¹è¯æ¼”ç¤º </p>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <!-- æŠ¤ç†äººå‘˜åœºæ™¯ -->
                <div class="scenario-card bg-white rounded-3xl p-8 text-center cursor-pointer" onclick="startScenario('nurse')">
                    <div class="w-20 h-20 bg-gradient-to-r from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-user-nurse text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">æŠ¤ç†äººå‘˜</h3>
                    <p class="text-gray-600 mb-6">è®°å½•è€äººå¥åº·æ•°æ®</p>
                    <div class="bg-green-50 rounded-xl p-4 text-left">
                        <p class="text-sm text-green-800 font-medium mb-2">æ¼”ç¤ºæµç¨‹ï¼š</p>
                        <ul class="text-xs text-green-700 space-y-1">
                            <li>â€¢ é€‰æ‹©è€äºº</li>
                            <li>â€¢ è®°å½•ä½“æ¸©</li>
                            <li>â€¢ è®°å½•è¡€å‹</li>
                            <li>â€¢ ä¿å­˜æ•°æ®</li>
                        </ul>
                    </div>
                </div>

                <!-- åå‹¤äººå‘˜åœºæ™¯ -->
                <div class="scenario-card bg-white rounded-3xl p-8 text-center cursor-pointer" onclick="startScenario('logistics')">
                    <div class="w-20 h-20 bg-gradient-to-r from-blue-400 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-boxes text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">åå‹¤äººå‘˜</h3>
                    <p class="text-gray-600 mb-6">ç”³è¯·ç‰©èµ„é‡‡è´­</p>
                    <div class="bg-blue-50 rounded-xl p-4 text-left">
                        <p class="text-sm text-blue-800 font-medium mb-2">æ¼”ç¤ºæµç¨‹ï¼š</p>
                        <ul class="text-xs text-blue-700 space-y-1">
                            <li>â€¢ é€‰æ‹©ç‰©èµ„ç±»å‹</li>
                            <li>â€¢ ç¡®å®šé‡‡è´­æ•°é‡</li>
                            <li>â€¢ é€‰æ‹©åˆ°è´§æ—¶é—´</li>
                            <li>â€¢ æäº¤ç”³è¯·</li>
                        </ul>
                    </div>
                </div>

                <!-- ç®¡ç†å‘˜åœºæ™¯ -->
                <div class="scenario-card bg-white rounded-3xl p-8 text-center cursor-pointer" onclick="startScenario('admin')">
                    <div class="w-20 h-20 bg-gradient-to-r from-purple-400 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-chart-line text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">ç®¡ç†å‘˜</h3>
                    <p class="text-gray-600 mb-6">æŸ¥è¯¢è´¹ç”¨è´¦å•</p>
                    <div class="bg-purple-50 rounded-xl p-4 text-left">
                        <p class="text-sm text-purple-800 font-medium mb-2">æ¼”ç¤ºæµç¨‹ï¼š</p>
                        <ul class="text-xs text-purple-700 space-y-1">
                            <li>â€¢ é€‰æ‹©æŸ¥è¯¢è€äºº</li>
                            <li>â€¢ é€‰æ‹©æ—¶é—´æ®µ</li>
                            <li>â€¢ æŸ¥çœ‹è´¹ç”¨æ˜ç»†</li>
                            <li>â€¢ æ˜¾ç¤ºæ€»è®¡é‡‘é¢</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="text-center mt-12">
                <p class="text-white/60 text-sm">ç‚¹å‡»ä»»æ„åœºæ™¯å¡ç‰‡å¼€å§‹AIå¼•å¯¼å¼å¯¹è¯æ¼”ç¤º</p>
            </div>
        </div>
    </div>

    <!-- å¯¹è¯æ¼”ç¤ºé¡µé¢ -->
    <div id="chat-demo" class="hidden min-h-screen flex flex-col">
        <!-- é¡¶éƒ¨å¯¼èˆª -->
        <div class="bg-white/10 backdrop-blur-sm p-4 flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center">
                    <i class="fas fa-robot text-blue-500"></i>
                </div>
                <div class="text-white">
                    <h2 class="font-semibold">AIåŠ©æ‰‹å°æ™º</h2>
                    <p class="text-sm opacity-80" id="scenario-title">åœºæ™¯æ¼”ç¤º</p>
                </div>
            </div>
            <button onclick="backToSelection()" class="text-white/80 hover:text-white">
                <i class="fas fa-arrow-left text-lg"></i>
            </button>
        </div>

        <!-- èŠå¤©åŒºåŸŸ -->
        <div class="flex-1 p-4 overflow-y-auto" id="demo-messages">
            <!-- æ¶ˆæ¯å°†åœ¨è¿™é‡ŒåŠ¨æ€æ·»åŠ  -->
        </div>

        <!-- é€‰é¡¹åŒºåŸŸ -->
        <div class="p-4 bg-white/10 backdrop-blur-sm" id="demo-options">
            <!-- é€‰é¡¹æŒ‰é’®å°†åœ¨è¿™é‡ŒåŠ¨æ€æ·»åŠ  -->
        </div>
    </div>

    <script>
        let currentScenario = null;
        let demoStep = 0;
        let demoData = {};

        // åœºæ™¯é…ç½®
        const scenarios = {
            nurse: {
                title: 'æŠ¤ç†äººå‘˜ - è®°å½•å¥åº·æ•°æ®',
                userName: 'ææŠ¤å£«',
                steps: [
                    {
                        ai: 'æ‚¨å¥½ï¼ŒæŠ¤ç†äººå‘˜ ææŠ¤å£«ï¼æˆ‘æ˜¯AIåŠ©æ‰‹å°æ™ºã€‚æ‚¨ç°åœ¨è¦è®°å½•è€äººçš„å¥åº·æ•°æ®å—ï¼Ÿ',
                        options: [
                            { text: 'æ˜¯çš„ï¼Œæˆ‘è¦è®°å½•å¥åº·æ•°æ®', next: 1 }
                        ]
                    },
                    {
                        ai: 'å¥½çš„ï¼Œè¯·é€‰æ‹©æ‚¨è¦è®°å½•å¥åº·æ•°æ®çš„è€äººï¼š',
                        options: [
                            { text: 'å¼ ä¸‰ (101æˆ¿é—´)', data: { name: 'å¼ ä¸‰', room: '101' }, next: 2 },
                            { text: 'æå›› (102æˆ¿é—´)', data: { name: 'æå››', room: '102' }, next: 2 },
                            { text: 'ç‹äº” (103æˆ¿é—´)', data: { name: 'ç‹äº”', room: '103' }, next: 2 }
                        ]
                    },
                    {
                        ai: 'å¥½çš„ï¼Œè¯·è¾“å…¥{name}çš„ä½“æ¸©ï¼š',
                        options: [
                            { text: '36.0 åº¦', data: { temperature: '36.0' }, next: 3 },
                            { text: '36.5 åº¦', data: { temperature: '36.5' }, next: 3 },
                            { text: '37.0 åº¦', data: { temperature: '37.0' }, next: 3 },
                            { text: '37.5 åº¦', data: { temperature: '37.5' }, next: 3 }
                        ]
                    },
                    {
                        ai: 'è¯·é—®{name}çš„è¡€å‹æ˜¯å¤šå°‘ï¼š',
                        options: [
                            { text: '110/70', data: { bloodPressure: '110/70' }, next: 4 },
                            { text: '120/80', data: { bloodPressure: '120/80' }, next: 4 },
                            { text: '130/90', data: { bloodPressure: '130/90' }, next: 4 },
                            { text: '140/95', data: { bloodPressure: '140/95' }, next: 4 }
                        ]
                    },
                    {
                        ai: 'å·²æˆåŠŸè®°å½•{name}çš„å¥åº·æ•°æ®ï¼\n\nğŸ“Š è®°å½•è¯¦æƒ…ï¼š\nä½“æ¸©ï¼š{temperature}Â°C\nè¡€å‹ï¼š{bloodPressure}\nè®°å½•æ—¶é—´ï¼š{time}',
                        options: [
                            { text: 'ç»§ç»­è®°å½•å…¶ä»–è€äºº', next: 1 },
                            { text: 'è¿”å›ä¸»èœå•', next: 'end' }
                        ]
                    }
                ]
            },
            logistics: {
                title: 'åå‹¤äººå‘˜ - ç”³è¯·ç‰©èµ„é‡‡è´­',
                userName: 'ç‹å¸ˆå‚…',
                steps: [
                    {
                        ai: 'æ‚¨å¥½ï¼Œåå‹¤äººå‘˜ ç‹å¸ˆå‚…ï¼æˆ‘æ˜¯AIåŠ©æ‰‹å°æ™ºã€‚æ‚¨ç°åœ¨è¦ç”³è¯·é‡‡è´­ç‰©èµ„å—ï¼Ÿ',
                        options: [
                            { text: 'æ˜¯çš„ï¼Œæˆ‘è¦ç”³è¯·é‡‡è´­', next: 1 }
                        ]
                    },
                    {
                        ai: 'å¥½çš„ï¼Œè¯·é€‰æ‹©æ‚¨è¦é‡‡è´­çš„ç‰©èµ„ç±»å‹ï¼š',
                        options: [
                            { text: 'åºŠå•', data: { supplyType: 'åºŠå•' }, next: 2 },
                            { text: 'è¢«ç½©', data: { supplyType: 'è¢«ç½©' }, next: 2 },
                            { text: 'å…¶ä»–', data: { supplyType: 'å…¶ä»–' }, next: 2 }
                        ]
                    },
                    {
                        ai: 'æ‚¨è¦é‡‡è´­å¤šå°‘{supplyType}ï¼Ÿ',
                        options: [
                            { text: '10 ä»¶', data: { quantity: '10' }, next: 3 },
                            { text: '20 ä»¶', data: { quantity: '20' }, next: 3 },
                            { text: '30 ä»¶', data: { quantity: '30' }, next: 3 },
                            { text: '50 ä»¶', data: { quantity: '50' }, next: 3 }
                        ]
                    },
                    {
                        ai: 'å¥½çš„ï¼Œè¯·é€‰æ‹©é¢„è®¡åˆ°è´§æ—¶é—´ï¼š',
                        options: [
                            { text: '2025å¹´6æœˆ1æ—¥', data: { deliveryDate: '2025å¹´6æœˆ1æ—¥' }, next: 4 },
                            { text: '2025å¹´6æœˆ15æ—¥', data: { deliveryDate: '2025å¹´6æœˆ15æ—¥' }, next: 4 },
                            { text: '2025å¹´6æœˆ30æ—¥', data: { deliveryDate: '2025å¹´6æœˆ30æ—¥' }, next: 4 }
                        ]
                    },
                    {
                        ai: 'é‡‡è´­ç”³è¯·å·²æäº¤æˆåŠŸï¼\n\nğŸ“‹ ç”³è¯·è¯¦æƒ…ï¼š\nç‰©èµ„ç±»å‹ï¼š{supplyType}\né‡‡è´­æ•°é‡ï¼š{quantity}ä»¶\né¢„è®¡åˆ°è´§ï¼š{deliveryDate}\nç”³è¯·ç¼–å·ï¼š{requestId}\nçŠ¶æ€ï¼šå¾…å®¡æ‰¹',
                        options: [
                            { text: 'ç»§ç»­ç”³è¯·å…¶ä»–ç‰©èµ„', next: 1 },
                            { text: 'è¿”å›ä¸»èœå•', next: 'end' }
                        ]
                    }
                ]
            },
            admin: {
                title: 'ç®¡ç†å‘˜ - æŸ¥è¯¢è´¹ç”¨è´¦å•',
                userName: 'å¼ ä¸»ä»»',
                steps: [
                    {
                        ai: 'æ‚¨å¥½ï¼Œç®¡ç†å‘˜ å¼ ä¸»ä»»ï¼æˆ‘æ˜¯AIåŠ©æ‰‹å°æ™ºã€‚æ‚¨ç°åœ¨è¦æŸ¥è¯¢è€äººçš„è´¹ç”¨è´¦å•å—ï¼Ÿ',
                        options: [
                            { text: 'æ˜¯çš„ï¼Œæˆ‘è¦æŸ¥è¯¢è´¦å•', next: 1 }
                        ]
                    },
                    {
                        ai: 'å¥½çš„ï¼Œè¯·é€‰æ‹©æ‚¨è¦æŸ¥è¯¢è´¹ç”¨çš„è€äººï¼š',
                        options: [
                            { text: 'å¼ ä¸‰ (101æˆ¿é—´)', data: { name: 'å¼ ä¸‰', room: '101' }, next: 2 },
                            { text: 'æå›› (102æˆ¿é—´)', data: { name: 'æå››', room: '102' }, next: 2 },
                            { text: 'ç‹äº” (103æˆ¿é—´)', data: { name: 'ç‹äº”', room: '103' }, next: 2 }
                        ]
                    },
                    {
                        ai: 'æ‚¨è¦æŸ¥è¯¢å“ªä¸ªæ—¶é—´æ®µçš„è´¹ç”¨ï¼Ÿ',
                        options: [
                            { text: '2025å¹´4æœˆ', data: { period: '2025å¹´4æœˆ', accommodation: 3000, nursing: 2000, meals: 800 }, next: 3 },
                            { text: '2025å¹´5æœˆ', data: { period: '2025å¹´5æœˆ', accommodation: 3000, nursing: 2000, meals: 800 }, next: 3 },
                            { text: '2025å¹´6æœˆ', data: { period: '2025å¹´6æœˆ', accommodation: 3000, nursing: 2000, meals: 800 }, next: 3 }
                        ]
                    },
                    {
                        ai: 'æ­£åœ¨æŸ¥è¯¢ä¸­ï¼Œè¯·ç¨ç­‰â€¦â€¦',
                        options: [],
                        autoNext: 4,
                        delay: 2000
                    },
                    {
                        ai: '{name} {period}çš„è´¹ç”¨è´¦å•å¦‚ä¸‹ï¼š\n\nğŸ’° è´¹ç”¨æ˜ç»†ï¼š\nä½å®¿è´¹ï¼š{accommodation}å…ƒ\næŠ¤ç†è´¹ï¼š{nursing}å…ƒ\né¤é¥®è´¹ï¼š{meals}å…ƒ\n\næ€»è®¡ï¼š{total}å…ƒ',
                        options: [
                            { text: 'æŸ¥è¯¢å…¶ä»–è€äººè´¦å•', next: 1 },
                            { text: 'è¿”å›ä¸»èœå•', next: 'end' }
                        ]
                    }
                ]
            }
        };

        // å¼€å§‹åœºæ™¯æ¼”ç¤º
        function startScenario(scenarioType) {
            currentScenario = scenarioType;
            demoStep = 0;
            demoData = {};

            document.getElementById('scenario-selection').classList.add('hidden');
            document.getElementById('chat-demo').classList.remove('hidden');
            document.getElementById('scenario-title').textContent = scenarios[scenarioType].title;

            // æ¸…ç©ºèŠå¤©è®°å½•
            document.getElementById('demo-messages').innerHTML = '';
            document.getElementById('demo-options').innerHTML = '';

            // å¼€å§‹ç¬¬ä¸€æ­¥
            executeStep();
        }

        // è¿”å›åœºæ™¯é€‰æ‹©
        function backToSelection() {
            document.getElementById('chat-demo').classList.add('hidden');
            document.getElementById('scenario-selection').classList.remove('hidden');
            currentScenario = null;
            demoStep = 0;
            demoData = {};
        }

        // æ‰§è¡Œå½“å‰æ­¥éª¤
        function executeStep() {
            const scenario = scenarios[currentScenario];
            const step = scenario.steps[demoStep];

            if (!step) return;

            // å¤„ç†AIæ¶ˆæ¯ä¸­çš„å˜é‡æ›¿æ¢
            let aiMessage = step.ai;
            for (const [key, value] of Object.entries(demoData)) {
                aiMessage = aiMessage.replace(new RegExp(`{${key}}`, 'g'), value);
            }

            // ç‰¹æ®Šå¤„ç†
            if (aiMessage.includes('{time}')) {
                aiMessage = aiMessage.replace('{time}', new Date().toLocaleString());
            }
            if (aiMessage.includes('{requestId}')) {
                aiMessage = aiMessage.replace('{requestId}', Date.now());
            }
            if (aiMessage.includes('{total}')) {
                const total = (demoData.accommodation || 0) + (demoData.nursing || 0) + (demoData.meals || 0);
                aiMessage = aiMessage.replace('{total}', total);
            }

            // æ·»åŠ AIæ¶ˆæ¯
            addDemoMessage('ai', aiMessage);

            // æ˜¾ç¤ºé€‰é¡¹æˆ–è‡ªåŠ¨è¿›å…¥ä¸‹ä¸€æ­¥
            if (step.autoNext) {
                setTimeout(() => {
                    demoStep = step.autoNext;
                    executeStep();
                }, step.delay || 1000);
            } else {
                setTimeout(() => {
                    showDemoOptions(step.options);
                }, 500);
            }
        }

        // æ·»åŠ æ¼”ç¤ºæ¶ˆæ¯
        function addDemoMessage(sender, text) {
            const messagesContainer = document.getElementById('demo-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message-bubble mb-4 ${sender === 'ai' ? 'flex' : 'flex justify-end'}`;
            
            const bubbleClass = sender === 'ai' 
                ? 'bg-white text-gray-800 rounded-2xl rounded-tl-sm p-4 max-w-sm shadow-lg'
                : 'bg-blue-500 text-white rounded-2xl rounded-tr-sm p-4 max-w-sm shadow-lg';
            
            messageDiv.innerHTML = `
                <div class="${bubbleClass}">
                    ${sender === 'ai' ? '<i class="fas fa-robot text-blue-500 mr-2"></i>' : ''}
                    <div class="whitespace-pre-line">${text}</div>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // æ˜¾ç¤ºæ¼”ç¤ºé€‰é¡¹
        function showDemoOptions(options) {
            const container = document.getElementById('demo-options');
            container.innerHTML = '';
            
            if (options.length === 0) return;
            
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'grid gap-2';
            
            options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'bg-white/20 backdrop-blur-sm text-white p-3 rounded-xl text-left hover:bg-white/30 transition-all';
                button.innerHTML = `
                    <span class="font-medium">${index + 1}. ${option.text}</span>
                `;
                button.onclick = () => handleDemoOption(option);
                optionsDiv.appendChild(button);
            });
            
            container.appendChild(optionsDiv);
        }

        // å¤„ç†æ¼”ç¤ºé€‰é¡¹ç‚¹å‡»
        function handleDemoOption(option) {
            // æ·»åŠ ç”¨æˆ·é€‰æ‹©çš„æ¶ˆæ¯
            addDemoMessage('user', option.text);
            
            // æ¸…ç©ºé€‰é¡¹
            document.getElementById('demo-options').innerHTML = '';
            
            // ä¿å­˜é€‰æ‹©çš„æ•°æ®
            if (option.data) {
                Object.assign(demoData, option.data);
            }
            
            // è¿›å…¥ä¸‹ä¸€æ­¥
            setTimeout(() => {
                if (option.next === 'end') {
                    setTimeout(() => {
                        addDemoMessage('ai', 'æ¼”ç¤ºå®Œæˆï¼æ„Ÿè°¢æ‚¨çš„ä½“éªŒã€‚æ‚¨å¯ä»¥è¿”å›é€‰æ‹©å…¶ä»–åœºæ™¯æˆ–é‡æ–°å¼€å§‹ã€‚');
                        setTimeout(() => {
                            showDemoOptions([
                                { text: 'è¿”å›åœºæ™¯é€‰æ‹©', action: 'back' },
                                { text: 'é‡æ–°å¼€å§‹å½“å‰åœºæ™¯', action: 'restart' }
                            ]);
                        }, 1000);
                    }, 1000);
                } else {
                    demoStep = option.next;
                    executeStep();
                }
            }, 500);
        }

        // å¤„ç†ç‰¹æ®Šæ“ä½œ
        function handleDemoOption(option) {
            if (option.action === 'back') {
                backToSelection();
                return;
            } else if (option.action === 'restart') {
                startScenario(currentScenario);
                return;
            }

            // åŸæœ‰é€»è¾‘
            addDemoMessage('user', option.text);
            document.getElementById('demo-options').innerHTML = '';
            
            if (option.data) {
                Object.assign(demoData, option.data);
            }
            
            setTimeout(() => {
                if (option.next === 'end') {
                    setTimeout(() => {
                        addDemoMessage('ai', 'æ¼”ç¤ºå®Œæˆï¼æ„Ÿè°¢æ‚¨çš„ä½“éªŒã€‚æ‚¨å¯ä»¥è¿”å›é€‰æ‹©å…¶ä»–åœºæ™¯æˆ–é‡æ–°å¼€å§‹ã€‚');
                        setTimeout(() => {
                            showDemoOptions([
                                { text: 'è¿”å›åœºæ™¯é€‰æ‹©', action: 'back' },
                                { text: 'é‡æ–°å¼€å§‹å½“å‰åœºæ™¯', action: 'restart' }
                            ]);
                        }, 1000);
                    }, 1000);
                } else {
                    demoStep = option.next;
                    executeStep();
                }
            }, 500);
        }
    </script>
</body>
</html> 